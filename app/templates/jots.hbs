{{#paper-sidenav-container class='inner-sidenav'}}
  {{#paper-sidenav class='md-whiteframe-2dp'
                   name='left'
                   open=leftSideBarOpen
                   onToggle=(action (mut leftSideBarOpen))}}

    {{!-- Logo, title, and login --}}
    {{#paper-toolbar}}
      {{#paper-toolbar-tools class='nav-title-toolbar layout-row layout-align-space-around md-whiteframe-2dp'}}
        {{#link-to 'jots.howTo' class='flex-nogrowth'}}<img src='assets/favicons/favicon-96x96.png' id='menu-logo'>{{/link-to}}
        {{#link-to 'jots' class='flex-nogrowth'}}<nobr>Speed Jots</nobr>{{/link-to}}
        <div class='flex-nogrowth'>
          {{login-component}}
        </div>
      {{/paper-toolbar-tools}}
    {{/paper-toolbar}}
    {{!-- / Logo, title, and login --}}

    {{!-- Icons --}}
    <div class='layout-row layout-align-space-around-center nav-icons'>
      {{!-- <div class='flex-none'>
        {{paper-icon 'file-download' class='' title='Download all Jots' click=(action 'dlAllJots' model)}}
      </div> --}}
      <div class='flex-none'>
        {{paper-icon 'arrow-downward' title='Open all groups' click=(action 'openAllGroups')}}
      </div>
      <div class='flex-none'>
        {{paper-icon 'arrow-upward' title='Close all groups' click=(action 'closeAllGroups')}}
      </div>
      {{#draggable-object-target action='addJotToGroup' class='flex-none'}}
        {{paper-icon 'content-copy' class='new-group-icon' title='Drop a jot on this icon to create a new group'}}
      {{/draggable-object-target}}
      <div class='flex-none new-jot-icon-div'>
        {{paper-icon 'add-circle-outline' class='new-jot-icon' title='Add new jot' click=(action 'newJot')}}
      </div>
    </div>
    {{!-- / Icons --}}

    {{#paper-content padding=false}}
      {{!-- Search & Results --}}
      {{#filter-content content=sortedModel properties='title tags' as |filtered query|}}
        {{paper-input id='search-input' value=query icon='search' label='Search titles & tags' onChange=(action (mut query))}}
        {{#if (not-eq query '')}}
          {{#each filtered as |jot|}}
            {{jot-menu-link jot=jot}}
          {{/each}}
        {{/if}}
        <div class='cpanel-after-link-group-spacer'></div>
      {{/filter-content}}
      {{!-- / Search & Results --}}

      {{!-- Groups in collapsible panels --}}
      {{#each sortedJotsByGroup as |group|}}
        {{#cp-panels name='allGroups' as |panels|}}
          {{#panels.panel name=group.value open=(if (eq group.value 'Not Grouped') true false) as |p|}}
            {{#draggable-object-target action='addJotToGroup' groupTitle=group.value}}
              {{#p.toggle}}
                {{#paper-toolbar accent=true}}
                  {{#paper-toolbar-tools class='nav-group-toolbar'}}
                    {{#paper-menu isOpen=false offset='15 20' as |menu|}}
                      {{#menu.trigger}}
                        {{paper-icon 'create' class='edit-group-icon' title='Edit group title'}}
                      {{/menu.trigger}}
                      {{#menu.content width=6 as |content|}}
                        {{#content.menu-item onClick=null}}
                          {{paper-icon 'create' class='md-menu-align-target'}}
                          {{!-- placeholder sets oldGroupTitle var when editing group title --}}
                          {{paper-input value=group.value
                                        placeholder=group.items.[0].group
                                        onChange=(action (mut group.value))
                                        onBlur='editGroupTitle'}}
                          {{paper-icon 'forward' class='cursor-pointer'}}
                        {{/content.menu-item}}
                      {{/menu.content}}
                    {{/paper-menu}}
                    {{group.value}}
                    <span class='flex'></span>
                    {{#paper-button iconButton=true}}
                      {{paper-icon (if p.isOpen 'keyboard-arrow-down' 'keyboard-arrow-right')}}
                    {{/paper-button}}
                  {{/paper-toolbar-tools}}
                {{/paper-toolbar}}
              {{/p.toggle}}
              {{#p.body}}
                {{#each group.items as |jot|}}
                  {{#draggable-object content=jot}}
                    {{#paper-content padding=false}}
                      {{jot-menu-link jot=jot}}
                    {{/paper-content}}
                  {{/draggable-object}}
                {{/each}}
                <div class='cpanel-after-link-group-spacer'></div>
              {{/p.body}}
            {{/draggable-object-target}}
          {{/panels.panel}}
        {{/cp-panels}}
      {{/each}}
      {{!-- / Groups in collapsible panels --}}

    {{/paper-content}}
  {{/paper-sidenav}}

  <div id='editor-div' class='layout-column layout-align-start-center layout-fill'>
    {{#paper-content id='simditor-scroll-detect' class='width-100' padding=true}}
      {{#paper-sidenav-toggle name='left' as |toggleAction|}}
        {{paper-icon 'menu' class='hide-gt-sm toggle-nav-icon' title='Toggle menu' click=(action toggleAction)}}
      {{/paper-sidenav-toggle}}

      {{outlet}}
    {{/paper-content}}
  </div>

{{/paper-sidenav-container}}
